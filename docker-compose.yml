nginx-proxy:
  image: nginx:latest
  container_name: mlflow_proxy
  restart: unless-stopped
  ports:
    - "4200:5000"
  # Usar command para crear directorio primero
  command: >
    sh -c "mkdir -p /etc/nginx/conf.d &&
           cp /tmp/nginx.conf /etc/nginx/conf.d/default.conf &&
           nginx -g 'daemon off;'"
  volumes:
    # Montar archivos en ubicaci√≥n temporal
    - ./nginx.conf:/tmp/nginx.conf:ro
    - ./.htpasswd:/etc/nginx/.htpasswd:ro
  depends_on:
    - mlflow-server
  networks:
    - mlflow_net
